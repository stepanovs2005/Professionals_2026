# 9. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ç–∏–ø–∞ VLAN –Ω–∞ fw-cod –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É VLAN

[‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](../README.md) | [‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å](08-fwcod-web-config.md) | [–°–ª–µ–¥—É—é—â–∏–π –º–æ–¥—É–ª—å ‚Üí](10-next-config.md)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–°–æ–∑–¥–∞–Ω–∏–µ Ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
- [–°–æ–∑–¥–∞–Ω–∏–µ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤](#—Å–æ–∑–¥–∞–Ω–∏–µ-vlan-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
  - [VLAN 100 (SRV-COD)](#vlan-100-srv-cod)
  - [–û—Å—Ç–∞–ª—å–Ω—ã–µ VLAN](#–æ—Å—Ç–∞–ª—å–Ω—ã–µ-vlan)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–¥–æ—Å—Ç—É–ø–∞-–≤-–∏–Ω—Ç–µ—Ä–Ω–µ—Ç)

---

## –û–±–∑–æ—Ä

–î–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É VLAN –≤ –æ—Ñ–∏—Å–µ COD –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –Ω–∞ fw-cod (Ideco NGFW) –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ç–∏–ø–∞ VLAN. –ú–µ–∂—Å–µ—Ç–µ–≤–æ–π —ç–∫—Ä–∞–Ω –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–æ–ª—å —à–ª—é–∑–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö VLAN.

| VLAN | –ù–∞–∑–≤–∞–Ω–∏–µ | –ü–æ–¥—Å–µ—Ç—å | –®–ª—é–∑ (fw-cod) |
|------|----------|---------|---------------|
| 100 | SRV-COD | 192.168.10.0/24 | 192.168.10.254 |
| 300 | MGMT-COD | 192.168.30.0/24 | 192.168.30.254 |
| 400 | CLI | 192.168.40.0/24 | 192.168.40.254 |
| 500 | VOIP | 192.168.50.0/24 | 192.168.50.254 |

> ‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è VLAN 200 (DATA) —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ç.–∫. –ø–æ —É—Å–ª–æ–≤–∏—è–º –∑–∞–¥–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫ –¥–∞–Ω–Ω–æ–≥–æ VLAN –Ω–µ –¥–æ–ª–∂–µ–Ω –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è.

---

## –°–æ–∑–¥–∞–Ω–∏–µ Ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π Ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤—Å–µ VLAN.

### –®–∞–≥ 1. –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É **https://172.16.1.2:8443** (IP-–∞–¥—Ä–µ—Å fw-cod).

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–°–µ—Ä–≤–∏—Å—ã ‚Üí –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ‚Üí + –î–æ–±–∞–≤–∏—Ç—å ‚Üí Ethernet**:

![Add Ethernet menu](../images/fw-cod_add_ethernet_menu.png)

### –®–∞–≥ 2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**:

![Add Ethernet form](../images/fw-cod_add_ethernet_form.png)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| –ù–∞–∑–≤–∞–Ω–∏–µ | fw1-cod | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∏–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ |
| –†–æ–ª—å | LAN | –†–æ–ª—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ —Å–µ—Ç–∏ |
| –ó–æ–Ω–∞ | ‚Äî | –ü–æ–ª–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ |
| VCE | –°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç | –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| –§–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç | eth1_da | –ü–æ—Ä—Ç, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤ —Å—Ç–æ—Ä–æ–Ω—É sw1-cod |
| –†–µ–∂–∏–º | –ë–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | IP-–∞–¥—Ä–µ—Å–∞ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –Ω–∞ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã |

> üìù **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–µ–∂–∏–º **¬´–ë–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏¬ª** –≤—ã–±—Ä–∞–Ω –ø–æ—Ç–æ–º—É, —á—Ç–æ IP-–∞–¥—Ä–µ—Å–∞ –±—É–¥—É—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã VLAN, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –Ω–∞ –±–∞–∑–µ –¥–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

–ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å**.

### –®–∞–≥ 3. –†–µ–∑—É–ª—å—Ç–∞—Ç

![Ethernet result](../images/fw-cod_ethernet_result.png)

‚úÖ Ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `fw1-cod` —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—Ç—É `eth1_da`.

---

## –°–æ–∑–¥–∞–Ω–∏–µ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### VLAN 100 (SRV-COD)

#### –®–∞–≥ 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–°–µ—Ä–≤–∏—Å—ã ‚Üí –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ‚Üí + –î–æ–±–∞–≤–∏—Ç—å ‚Üí VLAN**:

![Add VLAN menu](../images/fw-cod_add_vlan_menu.png)

#### –®–∞–≥ 2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**:

![Add VLAN form](../images/fw-cod_add_vlan_form.png)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ù–∞–∑–≤–∞–Ω–∏–µ | srv-cod |
| –†–æ–ª—å | LAN |
| VCE | –°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | fw1-cod |
| –¢–µ–≥ VLAN | 100 |

–î–∞–ª–µ–µ –∑–∞–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é IP-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –†–µ–∂–∏–º | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| IP-–∞–¥—Ä–µ—Å | 192.168.10.254 |
| –ú–∞—Å–∫–∞ | 255.255.255.0 (/24) |

–ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å**.

#### –®–∞–≥ 3. –†–µ–∑—É–ª—å—Ç–∞—Ç

![VLAN srv result](../images/fw-cod_vlan_srv_result.png)

‚úÖ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `srv-cod` (VLAN 100) —Å–æ–∑–¥–∞–Ω —Å IP-–∞–¥—Ä–µ—Å–æ–º `192.168.10.254/24`.

---

### –û—Å—Ç–∞–ª—å–Ω—ã–µ VLAN

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö VLAN:

| –ù–∞–∑–≤–∞–Ω–∏–µ | VLAN | IP-–∞–¥—Ä–µ—Å/–º–∞—Å–∫–∞ | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
|----------|------|----------------|-----------|
| mgmt-cod | 300 | 192.168.30.254/24 | fw1-cod |
| cli | 400 | 192.168.40.254/24 | fw1-cod |
| voip | 500 | 192.168.50.254/24 | fw1-cod |

### –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ç–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

![VLAN all result](../images/fw-cod_vlan_all_result.png)

| –¢–∏–ø | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å/–ø–æ—Ä—Ç | –¢–µ–≥ VLAN | IP-–∞–¥—Ä–µ—Å/–º–∞—Å–∫–∞ |
|-----|----------|----------------|----------|----------------|
| Ethernet | rtr-cod | eth0_01 | ‚Äî | 172.16.1.2/30 |
| Ethernet | fw1-cod | eth1_da | ‚Äî | ‚Äî |
| VLAN | srv-cod | fw1-cod | 100 | 192.168.10.254/24 |
| VLAN | mgmt-cod | fw1-cod | 300 | 192.168.30.254/24 |
| VLAN | cli | fw1-cod | 400 | 192.168.40.254/24 |
| VLAN | voip | fw1-cod | 500 | 192.168.50.254/24 |

‚úÖ –í—Å–µ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É sw1-cod.

### –í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ IP –Ω–∞ sw1-cod

–ò—Å–ø–æ–ª—å–∑—É—è —Å—Ä–µ–¥—Å—Ç–≤–∞ `iproute2`, —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å IP-–∞–¥—Ä–µ—Å–æ–º –∏–∑ –ø–æ–¥—Å–µ—Ç–∏ VLAN 300:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ VLAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
ip link add link ens19 name ens19.300 type vlan id 300

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
ip link set dev ens19 up
ip link set dev ens19.300 up

# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞
ip addr add 192.168.30.1/24 dev ens19.300

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–µ—Ä–µ–∑ fw-cod
ip route add 0.0.0.0/0 via 192.168.30.254
```

> üìù **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `ens19` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å sw1-cod, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤ —Å—Ç–æ—Ä–æ–Ω—É fw-cod. –ò–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç

```bash
ping -c3 77.88.8.8
```

![Ping Internet](../images/sw1-cod_ping_internet.png)

‚úÖ –î–æ—Å—Ç—É–ø –≤ —Å–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å sw1-cod —Ä–∞–±–æ—Ç–∞–µ—Ç (3 received, 0% packet loss).

---

## –ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### fw-cod ‚Äî –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –¢–∏–ø | VLAN | IP-–∞–¥—Ä–µ—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----|------|----------|------------|
| rtr-cod | Ethernet | ‚Äî | 172.16.1.2/30 | –°–≤—è–∑—å —Å rtr-cod |
| fw1-cod | Ethernet | ‚Äî | ‚Äî | Trunk –∫ sw1-cod |
| srv-cod | VLAN | 100 | 192.168.10.254/24 | –®–ª—é–∑ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ |
| mgmt-cod | VLAN | 300 | 192.168.30.254/24 | –®–ª—é–∑ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| cli | VLAN | 400 | 192.168.40.254/24 | –®–ª—é–∑ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| voip | VLAN | 500 | 192.168.50.254/24 | –®–ª—é–∑ –¥–ª—è VoIP |

### sw1-cod ‚Äî –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | ens19.300 |
| IP-–∞–¥—Ä–µ—Å | 192.168.30.1/24 |
| –®–ª—é–∑ | 192.168.30.254 (fw-cod) |

---

[‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](../README.md) | [‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å](08-fwcod-web-config.md) | [–°–ª–µ–¥—É—é—â–∏–π –º–æ–¥—É–ª—å ‚Üí](10-next-config.md)
