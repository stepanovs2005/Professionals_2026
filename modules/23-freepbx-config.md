# –ú–æ–¥—É–ª—å 23. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IP-—Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏ (FreePBX)

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](../README.md)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
* [–ß–∞—Å—Ç—å 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SangomaOS/FreePBX](#—á–∞—Å—Ç—å-1-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-sangomaosfreepbx)
* [–ß–∞—Å—Ç—å 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏](#—á–∞—Å—Ç—å-2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Å–µ—Ç–∏)
* [–ß–∞—Å—Ç—å 3: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FreePBX](#—á–∞—Å—Ç—å-3-–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-freepbx)
* [–ß–∞—Å—Ç—å 4: –°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –Ω–æ–º–µ—Ä–æ–≤](#—á–∞—Å—Ç—å-4-—Å–æ–∑–¥–∞–Ω–∏–µ-–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö-–Ω–æ–º–µ—Ä–æ–≤)
* [–ß–∞—Å—Ç—å 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SIP-–∫–ª–∏–µ–Ω—Ç–æ–≤](#—á–∞—Å—Ç—å-5-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-sip-–∫–ª–∏–µ–Ω—Ç–æ–≤)
* [–ß–∞—Å—Ç—å 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤](#—á–∞—Å—Ç—å-6-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∑–≤–æ–Ω–∫–æ–≤)
* [–ü—Ä–æ–≤–µ—Ä–∫–∞](#–ø—Ä–æ–≤–µ—Ä–∫–∞)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–í –¥–∞–Ω–Ω–æ–º –º–æ–¥—É–ª–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è IP-–ê–¢–° –Ω–∞ –±–∞–∑–µ FreePBX 16 (SangomaOS 7.8) –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π IP-—Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏ –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏ COD –∏ A.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| –°–µ—Ä–≤–µ—Ä | sip-cod |
| –û–° | SangomaOS 7.8 (SNG7-PBX16) |
| –í–µ—Ä—Å–∏—è FreePBX | 16 |
| –í–µ—Ä—Å–∏—è Asterisk | 18 |
| IP-–∞–¥—Ä–µ—Å | 192.168.50.50 |
| –ú–∞—Å–∫–∞ | 255.255.255.0 |
| –®–ª—é–∑ | 192.168.50.254 |
| DNS | 192.168.10.1 |
| SIP –ø–æ—Ä—Ç | 5060 (UDP) |
| VLAN | 500 (VOIP) |

**–£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| root –ø–∞—Ä–æ–ª—å | P@ssw0rd |
| –ê–¥–º–∏–Ω FreePBX | admin |
| –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞ | P@ssw0rd |

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º:**
| –ù–æ–º–µ—Ä | –ö–ª–∏–µ–Ω—Ç | –û—Ñ–∏—Å | IP-–∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ | VLAN |
| --- | --- | --- | --- | --- |
| 1001 | admin-cod | COD | 192.168.30.30 | 300 (MGMT-COD) |
| 1002 | cli-cod | COD | 192.168.40.10 | 400 (CLI) |
| 2001 | cli1-a | OFFICE-A | 192.168.20.10 | 200 (CLI) |
| 2002 | cli2-a | OFFICE-A | 192.168.20.20 | 200 (CLI) |

---

## –ß–∞—Å—Ç—å 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SangomaOS/FreePBX

### sip-cod (SNG7-PBX16)

#### –®–∞–≥ 1.1: –í—ã–±–æ—Ä —Ç–∏–ø–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å ISO –≤—ã–±–µ—Ä–∏—Ç–µ **FreePBX 16 Installation (Asterisk 18) - Recommended**

#### –®–∞–≥ 1.2: –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–í—ã–±–µ—Ä–∏—Ç–µ **Graphical Installation - Output to VGA**

#### –®–∞–≥ 1.3: –í—ã–±–æ—Ä —Ç–∏–ø–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–í—ã–±–µ—Ä–∏—Ç–µ **FreePBX Standard**

#### –®–∞–≥ 1.4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª—è root

–í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ **ROOT PASSWORD**, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å root –¥–≤–∞–∂–¥—ã (`P@ssw0rd`) –∏ –Ω–∞–∂–º–∏—Ç–µ **Done**.

> **üí° –°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ!

#### –®–∞–≥ 1.5: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞–∂–º–∏—Ç–µ **Reboot**.

---

## –ß–∞—Å—Ç—å 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏

### sip-cod (SNG7-PBX16)

#### –®–∞–≥ 2.1: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

–í–æ–π–¥–∏—Ç–µ –∫–∞–∫ root —Å –ø–∞—Ä–æ–ª–µ–º `P@ssw0rd`.

#### –®–∞–≥ 2.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `/etc/sysconfig/network-scripts/ifcfg-eth0`:

```bash
nano /etc/sysconfig/network-scripts/ifcfg-eth0
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```ini
TYPE="Ethernet"
PROXY_METHOD="none"
BROWSER_ONLY="no"
BOOTPROTO="static"
IPADDR="192.168.50.50"
NETMASK="255.255.255.0"
GATEWAY="192.168.50.254"
DNS1="192.168.10.1"
DEFROUTE="yes"
IPV4_FAILURE_FATAL="no"
IPV6INIT="yes"
IPV6_AUTOCONF="yes"
IPV6_DEFROUTE="yes"
IPV6_FAILURE_FATAL="no"
IPV6_ADDR_GEN_MODE="stable-privacy"
NAME="eth0"
DEVICE="eth0"
ONBOOT="yes"
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª (`Ctrl+O`, `Enter`, `Ctrl+X`).

#### –®–∞–≥ 2.3: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

```bash
reboot
```

#### –®–∞–≥ 2.4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
ip -c -br -4 a
ip -c r
cat /etc/resolv.conf
ping -c 3 192.168.50.254
ping -c 3 192.168.10.1
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
eth0    UP    192.168.50.50/24
default via 192.168.50.254 dev eth0
nameserver 192.168.10.1
```

---

## –ß–∞—Å—Ç—å 3: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FreePBX

### admin-cod (alt-workstation)

#### –®–∞–≥ 3.1: –û—Ç–∫—Ä—ã—Ç–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `http://192.168.50.50`

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
> - –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: `ping 192.168.50.50`
> - –ü—Ä–∞–≤–∏–ª–∞ firewall –Ω–∞ fw-cod –¥–ª—è –ø–æ—Ä—Ç–∞ 80/TCP
> - –°—Ç–∞—Ç—É—Å Apache: –Ω–∞ sip-cod –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `systemctl status httpd`

#### –®–∞–≥ 3.2: –°–æ–∑–¥–∞–Ω–∏–µ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| Username | admin |
| Password | P@ssw0rd |
| Confirm Password | P@ssw0rd |
| Notifications Email | admin@cod.ssa2026.region |
| System Identifier | VoIP Server COD |

–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –∏ –Ω–∞–∂–º–∏—Ç–µ **Submit**.

#### –®–∞–≥ 3.3: –í—ã–±–æ—Ä –ø–∞–Ω–µ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

–í—ã–±–µ—Ä–∏—Ç–µ **FreePBX Administration**.

#### –®–∞–≥ 3.4: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω `admin` –∏ –ø–∞—Ä–æ–ª—å `P@ssw0rd`, –Ω–∞–∂–º–∏—Ç–µ **Continue**.

#### –®–∞–≥ 3.5: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π—Ä–≤–æ–ª–∞

–ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –æ–∫–Ω–∞ Sangoma Smart Firewall –Ω–∞–∂–º–∏—Ç–µ **Abort**.

> **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú—ã –æ—Ç–∫–ª—é—á–∞–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π firewall FreePBX, —Ç–∞–∫ –∫–∞–∫ –∑–∞—â–∏—Ç–∞ —Å–µ—Ç–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ fw-cod (Ideco NGFW).

#### –®–∞–≥ 3.6: –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–ª—É–∂–±—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úì **Asterisk** (PBX-—è–¥—Ä–æ)
- ‚úì **–°–µ—Ä–≤–µ—Ä MySQL** (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- ‚úì **–í–µ–± —Å–µ—Ä–≤–µ—Ä** (Apache)
- ‚úì **UCP Daemon** (User Control Panel)

---

## –ß–∞—Å—Ç—å 4: –°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –Ω–æ–º–µ—Ä–æ–≤

### admin-cod (alt-workstation)

#### –®–∞–≥ 4.1: –í–∫–ª—é—á–µ–Ω–∏–µ CHAN_SIP (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Legacy SIP:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Advanced Settings**
2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä **SIP Channel Driver**
3. –í—ã–±–µ—Ä–∏—Ç–µ **chan_sip**
4. –ù–∞–∂–º–∏—Ç–µ **Submit**

> **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é FreePBX 16 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PJSIP. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –≤–∫–ª—é—á–∏—Ç–µ chan_sip.

#### –®–∞–≥ 4.2: –ü–µ—Ä–µ—Ö–æ–¥ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –Ω–æ–º–µ—Ä–∞–º

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Applications** ‚Üí **Extensions**

#### –®–∞–≥ 4.3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–æ–º–µ—Ä–∞

–ù–∞–∂–º–∏—Ç–µ **+ Add Extension** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ **Add New SIP (Legacy) [chan_sip] Extension**.

#### –®–∞–≥ 4.4: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –¥–ª—è –Ω–æ–º–µ—Ä–∞ 1001

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–æ–º–µ—Ä–∞ 1001 (admin-cod):**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| User Extension | 1001 | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä |
| Display Name | admin-cod | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è |
| Outbound CID | 1001 | Caller ID –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö |
| Emergency CID | 1001 | Caller ID –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö |
| Secret | P@ssw0rd | –ü–∞—Ä–æ–ª—å –¥–ª—è SIP-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |

–ù–∞–∂–º–∏—Ç–µ **Submit**.

#### –®–∞–≥ 4.5: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–æ–º–µ—Ä–∞:

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –Ω–æ–º–µ—Ä–æ–≤:**

| Extension | Display Name | Secret | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | IP –∫–ª–∏–µ–Ω—Ç–∞ |
| --- | --- | --- | --- | --- |
| 1001 | admin-cod | P@ssw0rd | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä COD | 192.168.30.30 |
| 1002 | cli-cod | P@ssw0rd | –ö–ª–∏–µ–Ω—Ç COD | 192.168.40.10 |
| 2001 | cli1-a | P@ssw0rd | –ö–ª–∏–µ–Ω—Ç 1 OFFICE-A | 192.168.20.10 |
| 2002 | cli2-a | P@ssw0rd | –ö–ª–∏–µ–Ω—Ç 2 OFFICE-A | 192.168.20.20 |

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–º–µ—Ä–∞:
> - User Extension = –Ω–æ–º–µ—Ä
> - Display Name = –∏–º—è —Ö–æ—Å—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞
> - Outbound CID = –Ω–æ–º–µ—Ä
> - Emergency CID = –Ω–æ–º–µ—Ä
> - Secret = P@ssw0rd

#### –®–∞–≥ 4.6: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤ –Ω–∞–∂–º–∏—Ç–µ **Apply Config** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

#### –®–∞–≥ 4.7: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ sip-cod

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ sip-cod:

```bash
reboot
```

> **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ Asterisk —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.

---

## –ß–∞—Å—Ç—å 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SIP-–∫–ª–∏–µ–Ω—Ç–æ–≤

### admin-cod, cli-cod, cli1-a, cli2-a (alt-workstation)

> **üìå –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –Ω–∞ –∫–∞–∂–¥–æ–º –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ**

#### –®–∞–≥ 5.1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Ñ—Ç—Ñ–æ–Ω–∞

–û—Ç–∫—Ä–æ–π—Ç–µ **–¶–µ–Ω—Ç—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** (Applications) –∏ –Ω–∞–π–¥–∏—Ç–µ **phone** –∏–ª–∏ **gnome-calls**. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–í—ã–∑–æ–≤—ã** (GNOME Calls) –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π SIP-–∫–ª–∏–µ–Ω—Ç.

> **üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
> - **Linphone** - –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π SIP-–∫–ª–∏–µ–Ω—Ç
> - **Ekiga** - —Å—Ç–∞—Ä—ã–π, –Ω–æ –Ω–∞–¥—ë–∂–Ω—ã–π
> - **Zoiper** - –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π, –Ω–æ —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π

#### –®–∞–≥ 5.2: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–í—ã–∑–æ–≤—ã** –∏–∑ –º–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

#### –®–∞–≥ 5.3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ VoIP

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ VoIP** –∏–ª–∏ **VoIP Accounts**.

#### –®–∞–≥ 5.4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ SIP-–∞–∫–∫–∞—É–Ω—Ç–∞

–ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å** –∏–ª–∏ **Add Account**.

**–§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SIP-–∞–∫–∫–∞—É–Ω—Ç–∞ (–ø—Ä–∏–º–µ—Ä –¥–ª—è admin-cod):**

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SIP-–∞–∫–∫–∞—É–Ω—Ç–∞](../images/freepbx-softphone-config.png)

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| –°–µ—Ä–≤–µ—Ä/Host | 192.168.50.50 | IP-–∞–¥—Ä–µ—Å sip-cod |
| –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è | admin-cod | –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/Username | *–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞* | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä |
| –ü–∞—Ä–æ–ª—å/Password | P@ssw0rd | –ü–∞—Ä–æ–ª—å –∏–∑ Extension |
| –ü–æ—Ä—Ç | 5060 | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SIP –ø–æ—Ä—Ç |
| –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç/Protocol | UDP | –ü—Ä–æ—Ç–æ–∫–æ–ª —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ |

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞–º:**
| –ö–ª–∏–µ–Ω—Ç | Username (ID) | Display Name | IP-–∞–¥—Ä–µ—Å |
| --- | --- | --- | --- |
| admin-cod | 1001 | admin-cod | 192.168.30.30 |
| cli-cod | 1002 | cli-cod | 192.168.40.10 |
| cli1-a | 2001 | cli1-a | 192.168.20.10 |
| cli2-a | 2002 | cli2-a | 192.168.20.20 |

#### –®–∞–≥ 5.5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å–æ—Ñ—Ç—Ñ–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

![–£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è](../images/freepbx-softphone-registered.png)

–ò–Ω–¥–∏–∫–∞—Ü–∏—è:
- **Online** / **–û–Ω–ª–∞–π–Ω** / **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω**
- –ó–µ–ª—ë–Ω–∞—è –æ—Ç–º–µ—Ç–∫–∞ –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø–æ–ª–æ–∂–µ–Ω–∏–∏ "–≤–∫–ª—é—á–µ–Ω–æ"
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞: `1001@192.168.50.50`

> **‚ö†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
> 
> –ï—Å–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:
> 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤—è–∑–Ω–æ—Å—Ç—å: `ping 192.168.50.50`
> 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 5060 –æ—Ç–∫—Ä—ã—Ç –Ω–∞ fw-cod
> 3. –ù–∞ sip-cod –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: `asterisk -rx "sip show peers"`
> 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /var/log/asterisk/full`

---

## –ß–∞—Å—Ç—å 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–≤–æ–Ω–æ–∫ –≤–Ω—É—Ç—Ä–∏ –æ—Ñ–∏—Å–∞ COD (1001 ‚Üí 1002)

#### –®–∞–≥ 6.1: –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞

–ù–∞ **admin-cod** (–Ω–æ–º–µ—Ä 1001) –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–æ—Ñ—Ç—Ñ–æ–Ω –∏ –Ω–∞–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä **1002**.

#### –®–∞–≥ 6.2: –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫

–ù–∞ **cli-cod** (–Ω–æ–º–µ—Ä 1002) –ø–æ—è–≤–∏—Ç—Å—è –≤—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤:

![–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –Ω–∞ 1002](../images/freepbx-call-incoming-1002.png)

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ:
- –ù–æ–º–µ—Ä –∑–≤–æ–Ω—è—â–µ–≥–æ: `sip:1001@192.168.50.50:5060`
- –°—Ç–∞—Ç—É—Å: "–í—ã–∑–æ–≤..." –∏–ª–∏ "–í—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤"
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **–ø—Ä–∏–Ω—è—Ç—å –≤—ã–∑–æ–≤** (–∑–µ–ª—ë–Ω–∞—è —Ç—Ä—É–±–∫–∞).

#### –®–∞–≥ 6.3: –ê–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä

–ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è –≤—ã–∑–æ–≤–∞ –Ω–∞ –æ–±–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏:

**–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ 1002 (cli-cod):**

![–ê–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫ 1002](../images/freepbx-call-incoming-1002-active.png)

**–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ 1001 (admin-cod) –∏ 1002 (cli-cod):**

![–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã](../images/freepbx-call-active-1001-1002.png)

![–¢–∞–π–º–µ—Ä —Ä–∞–∑–≥–æ–≤–æ—Ä–∞](../images/freepbx-call-active-1001-1002-timer.png)

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- **–¢–∞–π–º–µ—Ä –∑–≤–æ–Ω–∫–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "00:12" - 12 —Å–µ–∫—É–Ω–¥ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞)
- **–ù–æ–º–µ—Ä —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞** (`sip:1001@192.168.50.50`)
- **–°—Ç–∞—Ç—É—Å "–≠—Ç–æ—Ç –≤—ã–∑–æ–≤ –Ω–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω"**
- **–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
  - –û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
  - –ì—Ä–æ–º–∫–∞—è —Å–≤—è–∑—å
  - –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤
  - –£–¥–µ—Ä–∂–∏–≤–∞—Ç—å
  - –ü–∞–Ω–µ–ª—å –Ω–∞–±–æ—Ä–∞
  - –ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—ã–∑–æ–≤ (–∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –û–±–µ —Å—Ç–æ—Ä–æ–Ω—ã —Å–ª—ã—à–∞—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- ‚úÖ –¢–∞–π–º–µ—Ä –∑–≤–æ–Ω–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç —ç—Ö–∞ –∏–ª–∏ –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞ —Ö–æ—Ä–æ—à–µ–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–≤–æ–Ω–æ–∫ –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏ (1001 ‚Üí 2001)

#### –®–∞–≥ 6.4: –ú–µ–∂–¥—É–≥–æ—Ä–æ–¥–Ω–∏–π –∑–≤–æ–Ω–æ–∫

–ù–∞ **admin-cod** (1001) –Ω–∞–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä **2001** –¥–ª—è –∑–≤–æ–Ω–∫–∞ –≤ OFFICE-A.

![–ó–≤–æ–Ω–æ–∫ 1001 ‚Üí 2001](../images/freepbx-call-1001-2001.png)

–ù–∞ **cli1-a** (2001) –ø—Ä–∏–º–∏—Ç–µ –≤—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤.

#### –®–∞–≥ 6.5: –ê–∫—Ç–∏–≤–Ω—ã–π –º–µ–∂–¥—É–≥–æ—Ä–æ–¥–Ω–∏–π —Ä–∞–∑–≥–æ–≤–æ—Ä

![–ê–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫ –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏](../images/freepbx-call-1001-2001-timer.png)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ó–≤–æ–Ω–æ–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ GRE —Ç—É–Ω–Ω–µ–ª—å –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (< 100ms)
- ‚úÖ –ù–µ—Ç —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

> **üí° –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:**
> –ù–∞ sip-cod –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
> ```bash
> asterisk -rx "core show channels verbose"
> asterisk -rx "rtp show stats"
> ```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤

#### –ó–≤–æ–Ω–æ–∫ 1001 ‚Üí 2002

![–ó–≤–æ–Ω–æ–∫ 1001 ‚Üí 2002](../images/freepbx-call-1001-2002.png)

![–¢–∞–π–º–µ—Ä –∑–≤–æ–Ω–∫–∞ 1001 ‚Üí 2002](../images/freepbx-call-1001-2002-timer.png)

**–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- admin-cod (1001) ‚Üí cli2-a (2002)
- –û—Ñ–∏—Å COD ‚Üí –û—Ñ–∏—Å OFFICE-A
- VLAN 300 ‚Üí —Ç—É–Ω–Ω–µ–ª—å GRE ‚Üí VLAN 200

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –≤—ã–∑–æ–≤–æ–≤:

![–ò—Å—Ç–æ—Ä–∏—è –≤—ã–∑–æ–≤–æ–≤](../images/freepbx-calls-history.png)

–í —Å–ø–∏—Å–∫–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:
- **2002** - –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–≤–æ–Ω–æ–∫
- **2001** - –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–≤–æ–Ω–æ–∫
- **1002** - –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫
- –í—Ä–µ–º—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 14:23, 14:20, 14:07)
- –ò–∫–æ–Ω–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∑–≤–æ–Ω–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∂—É—Ä–Ω–∞–ª–∞:**
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—Ä–µ–º—è
- ‚úÖ –í–∏–¥–Ω—ã –Ω–æ–º–µ—Ä–∞ –∞–±–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∑–≤–æ–Ω–∞

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ sip-cod

```bash
asterisk -rx "sip show peers"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Name/username    Host              Dyn  Forcerport  Comedia  ACL  Port   Status      
1001/1001        192.168.30.30     D    Auto (No)   No       A    5060   OK (8 ms)
1002/1002        192.168.40.10     D    Auto (No)   No       A    5060   OK (12 ms)
2001/2001        192.168.20.10     D    Auto (No)   No       A    5060   OK (15 ms)
2002/2002        192.168.20.20     D    Auto (No)   No       A    5060   OK (18 ms)
4 sip peers [Monitored: 4 online, 0 offline Unmonitored: 0 online, 0 offline]
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:**
- **Dyn (D)** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- **Status OK** - –ø–∏—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- **XX ms** - –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ –∫–ª–∏–µ–Ω—Ç–∞ (ping time)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

```bash
asterisk -rx "core show channels"
```

**–í–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞ –æ–∂–∏–¥–∞–µ—Ç—Å—è:**
```
Channel              Location             State   Application(Data)
SIP/1001-00000001    2001@from-internal:1 Up      Dial(SIP/2001,tr)
SIP/2001-00000002    (None)               Up      AppDial((Outgoing Line))
2 active channels
1 active call
```

### 3. –¢–µ—Å—Ç–æ–≤–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∑–≤–æ–Ω–∫–æ–≤

| –û—Ç –∫–æ–≥–æ | –ö–æ–º—É | –ú–∞—Ä—à—Ä—É—Ç | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç | –°—Ç–∞—Ç—É—Å |
| --- | --- | --- | --- | --- |
| 1001 | 1002 | VLAN 300 ‚Üí VLAN 500 ‚Üí VLAN 400 | –ó–≤–æ–Ω–æ–∫ —É—Å–ø–µ—à–µ–Ω | ‚úÖ |
| 1001 | 2001 | VLAN 300 ‚Üí VLAN 500 ‚Üí GRE ‚Üí VLAN 200 | –ó–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å | ‚úÖ |
| 1002 | 2002 | VLAN 400 ‚Üí VLAN 500 ‚Üí GRE ‚Üí VLAN 200 | –ó–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å | ‚úÖ |
| 2001 | 1001 | VLAN 200 ‚Üí GRE ‚Üí VLAN 500 ‚Üí VLAN 300 | –û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫ | ‚úÖ |
| 2002 | 1002 | VLAN 200 ‚Üí GRE ‚Üí VLAN 500 ‚Üí VLAN 400 | –û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫ | ‚úÖ |
| 2001 | 2002 | VLAN 200 (–≤–Ω—É—Ç—Ä–∏ –æ—Ñ–∏—Å–∞ A) | –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–≤–æ–Ω–æ–∫ | ‚úÖ |

---

## üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é |
| --- | --- | --- |
| `/etc/sysconfig/network-scripts/ifcfg-eth0` | –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | ‚úÖ –î–∞ |
| `/etc/asterisk/sip_additional.conf` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SIP | ‚ùå –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è FreePBX |
| `/etc/asterisk/extensions_additional.conf` | Dialplan | ‚ùå –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è FreePBX |
| `/var/log/asterisk/full` | –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ | - (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) |

> **‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –§–∞–π–ª—ã —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_additional` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è FreePBX. –ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é!

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
| --- | --- | --- |
| **–ù–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** | –ù–µ–≤–µ—Ä–Ω—ã–π IP/–ø–æ—Ä—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ñ—Ç—Ñ–æ–Ω–∞: `192.168.50.50:5060` |
| **Registration failed** | –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Secret –≤ Extensions: `P@ssw0rd` |
| **No audio** | Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç RTP | –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã 10000-20000/UDP –Ω–∞ fw-cod |
| **–û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∑–≤—É–∫** | RTP –ø–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã | –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞ fw-cod |
| **–≠—Ö–æ** | –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–µ–∫–∞–º–∏ | Settings ‚Üí Asterisk SIP ‚Üí –æ—Ç–∫–ª—é—á–∏—Ç–µ —ç—Ö–æ |
| **Can't register** | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | `asterisk -rx "sip prune realtime peer 1001"` |

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Asterisk

```bash
# –°—Ç–∞—Ç—É—Å SIP-–ø–∏—Ä–æ–≤
asterisk -rx "sip show peers"

# –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
asterisk -rx "core show channels"

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ SIP
asterisk -rx "sip reload"

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å
asterisk -rvvv
```

---

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](../README.md)
